<!DOCTYPE html>
<html>
<head>
	<title>业务员认证</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <meta name="format-detection" content="telphone=no, email=no" />
  <meta name="x5-page-mode" content="app">
  <meta name="msapplication-tap-highlight" content="no">
  <meta name="full-screen" content="yes">
  <meta name="browsermode" content="application">

	<link rel="stylesheet" href="../assets/css/basic.css">
	<link rel="stylesheet" href="../assets/css/common.css">
  <link rel="stylesheet" href="../assets/css/auth.css">
	<link rel="stylesheet" href="../assets/css/weui.min.css">
</head>
<body>
<div class="m-header bordern">
  <div class="left">
      <a href="javascript:history.go(-1)" class="back-icon"></a>
  </div>
  <div class="middle">
      业务员认证
  </div>
  <div class="right"></div>
</div>

<main class="cBg clearbot">
	<div class="auth_write_from pt20">
    <div class="auth_person">
      <p class="fwb">申请人:</p>
      <div class="infos flexr mt20">
        <img class="avatar" src="../assets/images/test_logo.png">
        <div class="pl10">
          <p>姓名</p>
          <p class="mt5 fC2 fS12 ellipsis">13712611543@163.com</p>
        </div>
      </div>
    </div>

    <div class="auth_person mt20">
      <p class="fwb">审核机构：</p>
      <div class="infos flexr mt20">
        <img class="avatar" src="../assets/images/test_logo.png">
        <div class="pl10">
          <p>恒大地产集团<span class="business_type">代理方</span></p>
          <p class="mt5 fC2 fS12 ellipsis">以民生地产为基础,金融、健康为两翼,文化旅游...</p>
        </div>
      </div>
    </div>

		<label class="logo_input">
      <div class="add_logo"></div>
      <p class="fC2 fS12 mt10">上传企业机构LOGO</p>
      <img src="">
      <input type="hidden" name="logo">
      <input class="file_img" type="file" name="" accept="image/*">
    </label>
    <div class="input_item flexr pl15 pr15 mb20">
      <p class="lab">企业名称：</p>
      <input class="val" type="text" name="company" placeholder="请输入企业机构名称">
    </div>

    <div class="img_input flexr">
      <div class="desc">
        <p class="lab">身份证正面：</p>
        <p class="fS12 fC2">请上传法人身份证正面</p>
      </div>
      <div class="imgbox">
        <input type="hidden" name="yyzz">
        <input class="file_img" type="file" name="yyzz" accept="image/*">
        <img src="../assets/images/sfz.png">
      </div>
    </div>
    <div class="img_input flexr mb20">
      <div class="desc">
        <p class="lab">身份证反面：</p>
        <p class="fS12 fC2">请上传法人身份证反面</p>
      </div>
      <div class="imgbox">
        <input type="hidden" name="yyzf">
        <input class="file_img" type="file" name="yyzf" accept="image/*">
        <img src="../assets/images/sfzb.png">
      </div>
    </div>

    <div class="userinfo pl15 pr15 pb30 mb20">
      <div class="flexr info_item">
        <p class="lab">联系电话：</p>
        <input class="val" type="text" name="" placeholder="请输入申请人联系电话">
      </div>
      <div class="flexr info_item">
        <p class="lab">联系邮箱：</p>
        <input class="val" type="text" name="" placeholder="请输入申请人联系邮箱">
      </div>
    </div>
      
    <div class="check_item flexr pl15 pr15 mb20">
      <p class="lab">企业机构类型</p>
      <input id="company_type" type="text" name="" readonly placeholder="请选择">
      <i></i>
    </div>

    <div class="check_item flexr pl15 pr15 mb20">
      <p class="lab">所属行业</p>
      <input id="company_work" type="text" name="" readonly placeholder="请选择">
      <i></i>
    </div>

    <div class="sales_input_item mb20">
      <p class="title pt20 pl15 pb5">申请理由（必填）：</p>
      <div class="write_textarea" contenteditable="true" placeholder="描述机构申请用途"></div>
    </div>

    <div class="sales_input_item mb20 pl15 pr15 pb20">
      <p class="title pt20 pb20">上传名片（选填）：</p>
      <div class="img_input_box flexr">
        <label class="up_tips">
          <img class="tips_img" src="../assets/images/mp.png"> 
          <p class="fC2 fS12 mt10">点击上传名片</p>
          <input type="hidden" name="mp">
          <input class="file_img" type="file" name="mp" accept="image/*">
          <img class="img" src="">
        </label>
      </div>
    </div>

    <div class="sales_input_item mb20 pl15 pr15 pb20">
      <p class="title pt20 pb20">图片介绍（选填）：</p>
      <div class="img_input_box flexr">
        <label class="up_tips more">
          <img class="tips_img" src="../assets/images/img_no.png"> 
          <p class="fC2 fS12 mt10">添加图片（最多6张）</p>
        </label>
        <div class="img_word_list flexr">
          <label class="mulit_label">
            <img class="tips_img" src="../assets/images/img_no.png"/>
            <input class="mulit" type="file" name="zp" accept="image/*" multiple>
          </label>
        </div>
      </div>
    </div>
    <input class="submit" type="submit" name="submit" value="确认提交">

    <div class="sales_input_item mb20 pl15 pr15 pb20">
      <p class="title pt20 pb20">申请附件（选填）：</p>
      <div class="img_input_box flexr">
        <label class="up_tips">
          <img class="tips_img" src="../assets/images/file_icon.png"> 
          <p class="fC2 fS12 mt10">添加附件</p>
          <p class="fC2 fS12 mt10">支持PDF、Word等文档格式</p>
          <input class="mulit word_file" type="file" name="mp" accept="application/msexcel,application/msword,application/pdf,image/jpeg,image/png,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.wordprocessingml.document">
        </label>
      </div>
    </div>
	</div>
</main>
</body>
<script src="../assets/js/fontsize.js"></script>
<script src="../assets/js/jquery.js"></script>
<script src="../assets/js/weui.min.js"></script>
<script>
  $(function(){
    $(".auth_write_from input[type='file']").not(".mulit").change(function(){
      updataImg(this,$(this));
    });
    
    var imgnum = 0;
    $(".auth_write_from .up_tips.more").click(function(){
      $(".auth_write_from .img_word_list input.mulit").click();
    });

    $(".auth_write_from .img_word_list input.mulit").change(function(){
      var checknum = this.files.length;
      var _t = $(this).parent(".mulit_label");
      for(var i=0; i<checknum; i++){
        imgnum++;
        if (imgnum>6) {
          alert('只限上传6张');
          break;
          return false;
        }
        updataImgs(_t,this.files[i]);
      }
    });

    $(".auth_write_from .img_word_list").on("click"," .aded_img i",function(){
      $(this).parent(".aded_img").remove();
    });
  

    $(".auth_write_from .sales_input_item .up_tips .word_file").change(function(){
      var file = this.files[0];
      $(this).prev().prev().html(file.name);
      console.log(file.name);
    });


    // 上次图片方法
    function updataImg(_this,el){
      var file = _this.files[0];
      var URL = window.URL || window.webkitURL;
      // 通过 file 生成目标 url
      var imgURL = URL.createObjectURL(file);
      // 转base64
      var reader=new FileReader(),imgbase64='';
      reader.readAsDataURL(file);
      reader.onload=function(){
        imgbase64=this.result;
      }
      el.siblings("img").attr("src",imgURL).css("opacity","1");
    }
    
    // 上传多张图片
    function updataImgs(_this,file){
      var URL = window.URL || window.webkitURL;
      // 通过 file 生成目标 url
      var imgURL = URL.createObjectURL(file);
      // 转base64
      var reader=new FileReader(),imgbase64='',html='';
      reader.readAsDataURL(file);
      reader.onload=function(){
        imgbase64=this.result;
        html +='<div class="aded_img"><img src="'+ imgURL +'"/><input type="hidden" name="img" val="' + imgbase64 + '"><i></i></div>';
        _this.parent(".img_word_list").css("display","flex").siblings(".up_tips").hide();
        _this.before(html);
      }
    }



    var company_type = [
      {
        id: 1,
        label: "国有企业"
      },
      {
        id: 2,
        label: "集体所有制"
      },
      {
        id: 3,
        label: "私营企业"
      },
      {
        id: 4,
        label: "股份制企业"
      },
      {
        id: 5,
        label: "有限合伙企业"
      }
    ]
    $("#company_type").click(function(){
      var _t = $(this);
      weui.picker(company_type,{
        className:"company__type_picker",
        onConfirm: function (result) {
          _t.val(result[0].label);
        },
      })
    });

    var company_work = [
      {
        id: 1,
        label: "互联网"
      },
      {
        id: 2,
        label: "教师"
      },
      {
        id: 3,
        label: "运营"
      },
      {
        id: 4,
        label: "股份制企业"
      },
      {
        id: 5,
        label: "有限合伙企业"
      }
    ]
    $("#company_work").click(function(){
      var _t = $(this);
      weui.picker(company_work,{
        className:"company__type_picker",
        onConfirm: function (result) {
          _t.val(result[0].label);
        },
      })
    });


  });
</script>
</html>