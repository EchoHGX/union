<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telphone=no, email=no" />
    <meta name="x5-page-mode" content="app">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="full-screen" content="yes">
    <meta name="browsermode" content="application">
    <title>全部点评</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <script src="../assets/js/fontsize.js"></script>
    <link href="../assets/css/basic.css" rel="stylesheet" />
    <link href="../assets/css/eval.css" rel="stylesheet" />
</head>
<body>
<header class="m-header cBgf fixtop bordern" style="position: fixed;">
  <div class="left">
      <a href="javascript:history.go(-1)" class="back-icon"></a>
  </div>
  <div class="middle">全部点评</div>
  <div class="right"></div>
</header>

<main class="cleartop cBg" style="padding-top: 1.579rem;">
  <a class="need_eval" style="position: fixed;top: 46px;left: 0;z-index: 3;" href="javascript:void(0);">我也要点评</a>
  
  <div class="d_cont_wrap d_cont_wrap2">
    <div class="d_cont_item">
      <div class="title_has_more mt10 flexr">
        <h2 class="title_ztxt">632 条点评<i></i></h2>
        <p style="color: #FFAC2D;font-size: .512rem;line-height: .939rem;padding-left: .2rem;">好评 60%</p>
        <a href="javascript:void(0);" class="eval_type">好评</a>
        <div class="eval_type_list">
          <div class="eval_i">
            <a href="javascript:void(0);">全部</a>
            <a href="javascript:void(0);">好评</a>
            <a href="javascript:void(0);">中评</a>
            <a href="javascript:void(0);">差评</a>
          </div>
        </div>
      </div>

      <div class="d_cont_eval">
        <div class="d_eval_item flexr">
          <img class="eval_logo" src="../assets/images/test_logo.png">
          <div class="eval_desc">
            <p class="fS12 fC1">张小杰</p>
            <p class="time">2/20 06:32</p>
            <!-- 有多少颗心就设置data-start为几 -->
            <div class="flexr mt5" data-stars="3">
              <a class="star active" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star active" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star active" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
            </div>
            <p class="fC1 fS14 mt10">无论是一部作品、一个人，还是一件事，都往往可以衍生出许多不同的话题。将这些话题细分出来，分别进行讨论，会有更多收获。</p>
            <div class="flexr eval_img_list mt10">
              <img class="eval_img" src="../assets/images/new/ban1.png">
              <img class="eval_img" src="../assets/images/new/ban1.png">
              <img class="eval_img" src="../assets/images/new/ban1.png">
            </div>
          </div>
        </div>
        <div class="d_eval_item flexr">
          <img class="eval_logo" src="../assets/images/test_logo.png">
          <div class="eval_desc">
            <p class="fS12 fC1">张小杰</p>
            <p class="time">2/20 06:32</p>
            <!-- 有多少颗心就设置data-start为几 -->
            <div class="flexr mt5" data-stars="3">
              <a class="star active" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star active" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star active" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
            </div>
            <p class="fC1 fS14 mt10">无论是一部作品、一个人，还是一件事，都往往可以衍生出许多不同的话题。将这些话题细分出来，分别进行讨论，会有更多收获。</p>
          </div>
        </div>
        <div class="d_eval_item flexr">
          <img class="eval_logo" src="../assets/images/test_logo.png">
          <div class="eval_desc">
            <p class="fS12 fC1">张小杰</p>
            <p class="time">2/20 06:32</p>
            <!-- 有多少颗心就设置data-start为几 -->
            <div class="flexr mt5" data-stars="3">
              <a class="star active" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star active" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star active" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
              <a class="star" href="javascript:void(0);">
                <img class="star_y" src="../assets/images/star_y.svg">
                <img class="star_n" src="../assets/images/star_n.svg">
              </a>
            </div>
            <p class="fC1 fS14 mt10">无论是一部作品、一个人，还是一件事，都往往可以衍生出许多不同的话题。将这些话题细分出来，分别进行讨论，会有更多收获。</p>
          </div>
        </div>
      </div>
    </div>
  </div>

</main>


<!-- 评价框 -->
<div class="eval_alert">
  <div class="alert_bg"></div>
  <div class="eval_alert_wrap">
    <div class="top">
      <p>业务点评</p>
      <a class="cancel" href="javascript:void(0);">取消</a>
    </div>
    <div class="flexr eval_start mt15" data-stars="3">
      <p class="fS12 fC2 pr5 pt10">评分:</p>
      <a class="star active" href="javascript:void(0);">
        <img class="star_y" src="../assets/images/star_y.svg">
        <img class="star_n" src="../assets/images/star_n.svg">
      </a>
      <a class="star active" href="javascript:void(0);">
        <img class="star_y" src="../assets/images/star_y.svg">
        <img class="star_n" src="../assets/images/star_n.svg">
      </a>
      <a class="star active" href="javascript:void(0);">
        <img class="star_y" src="../assets/images/star_y.svg">
        <img class="star_n" src="../assets/images/star_n.svg">
      </a>
      <a class="star" href="javascript:void(0);">
        <img class="star_y" src="../assets/images/star_y.svg">
        <img class="star_n" src="../assets/images/star_n.svg">
      </a>
      <a class="star" href="javascript:void(0);">
        <img class="star_y" src="../assets/images/star_y.svg">
        <img class="star_n" src="../assets/images/star_n.svg">
      </a>
    </div>
    <textarea class="eval_textarea" placeholder="说点什么？"></textarea>
    <div class="eval_add_img flexr">
      <label class="eval_add_img_input">
        <input type="file" name="" multiple accept="images/*">
        <img src="../assets/images/new/add_iocn.svg">
        <p>添加图片</p>
      </label>
      <!-- <div class="added_img">
        <img src="../assets/images/new/img1.png">
        <i></i>
        <input type="hidden" name="">
      </div> -->
    </div>
    <a href="javascript:void(0);" class="eval_btn">发表点评</a>
  </div>
</div>
</body>
<script src="../assets/js/jquery.js"></script>
<script>
  $(function(){
    
    $(".need_eval").click(function(){
      $(".eval_alert").addClass("active");
    });
    
    $(".eval_alert .eval_alert_wrap .cancel,.eval_alert .alert_bg").click(function(){
      $(".eval_alert").removeClass("active");
    });

    $(".title_has_more .eval_type").click(function(){
      $(this).siblings(".eval_type_list").addClass("active");
      return false;
    });

    $(document).click(function(){
      if($(".eval_type_list").hasClass("active")){
        $(".eval_type_list").removeClass("active");
      }
    });

    //星评分
    $(".star").click(function(){
      var star = $(this).index();
      $(this).addClass("active").prevAll().addClass("active");
      $(this).nextAll().removeClass("active");
    });
    
    
    // 删除上传的js
    $(".eval_alert .eval_alert_wrap .eval_add_img").on("click"," .added_img i",function(){
      $(this).parent().remove();
    });

    // 上传图片js
    $(".eval_alert .eval_add_img .eval_add_img_input").on("change","input",function(){

      var file = this.files[0];

      var URL = window.URL || window.webkitURL;
      
      var imgURL = URL.createObjectURL(file);

      var reader =new FileReader();

      var base64 = "";

      reader.readAsDataURL(file);

      reader.onload=function(){
        //this.result: 转化的base
        base64 = this.result;

      }

      //此处用的imgURL(图片地址)是调用浏览器接口返回的，需要换成后台返回的真是url
      var html = '<div class="added_img"><img src="'+ imgURL +'"><i></i><input type="hidden" name="" value="'+base64+'""></div>';
      $(".eval_alert .eval_alert_wrap .eval_add_img").append(html);
    });
  });
</script>
</html>